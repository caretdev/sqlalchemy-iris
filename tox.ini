[tox]
requires =
  tox>=4
env_list = py{310,311,312}-{old,new}-{community,intersystems}


[testenv:py{38,39,310,311,312}-old-community]
deps =
  sqlalchemy<2
  -r requirements-dev.txt
  -r requirements-iris.txt
  -e.
commands = {envpython} -m pytest {posargs} --driver iris

[testenv:py{38,39,310,311,312}-new-community]
deps =
  sqlalchemy>=2
  -r requirements-dev.txt
  -r requirements-iris.txt
  -e.
commands = {envpython} -m pytest {posargs} --driver iris

[testenv:py{38,39,310,311,312}-old-intersystems]
deps =
  sqlalchemy<2
  -r requirements-dev.txt
  -r requirements-iris.txt
  -e .[intersystems]
commands = {envpython} -m pytest {posargs}

[testenv:py{38,39,310,311,312}-new-intersystems]
deps =
  sqlalchemy>=2
  -r requirements-dev.txt
  -r requirements-iris.txt
  -e .[intersystems]
commands = {envpython} -m pytest {posargs}
